<?php
require_once 'backend/config.php';

echo "๐๏ธ ะะพะฑะฐะฒะปัะตะผ ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ััะปัะณะธ ะฒ ัะฐะฑะปะธัั Services...\n\n";

try {
    // ะะพะดะบะปััะตะฝะธะต ะบ ะฑะฐะทะต ะดะฐะฝะฝัั
    $db = Database::getInstance();
    $pdo = $db->getConnection();
    
    // ะะพะปััะฐะตะผ ัััะตััะฒัััะธะต ะบะฐัะตะณะพัะธะธ ััะปัะณ
    $stmt = $pdo->query("SELECT category_id, category_name FROM ServiceCategories");
    $categories = $stmt->fetchAll(PDO::FETCH_ASSOC);
    
    echo "๐ ะะฐะนะดะตะฝะพ ะบะฐัะตะณะพัะธะน ััะปัะณ: " . count($categories) . "\n";
    foreach ($categories as $category) {
        echo "  - {$category['category_name']} (ID: {$category['category_id']})\n";
    }
    echo "\n";
    
    // ะะพะฟะพะปะฝะธัะตะปัะฝัะต ััะปัะณะธ ะดะปั ะบะฐะถะดะพะน ะบะฐัะตะณะพัะธะธ
    $additional_services = [
        // ะะธะฐะณะฝะพััะธะบะฐ (category_id = 1)
        1 => [
            ['name' => 'ะะพะผะฟัััะตัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ ะดะฒะธะณะฐัะตะปั', 'description' => 'ะะพะปะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ ัะธััะตะผั ัะฟัะฐะฒะปะตะฝะธั ะดะฒะธะณะฐัะตะปะตะผ ั ะฟะพะผะพััั ะฟัะพัะตััะธะพะฝะฐะปัะฝะพะณะพ ะพะฑะพััะดะพะฒะฐะฝะธั', 'price' => 2500, 'duration' => 60],
            ['name' => 'ะะธะฐะณะฝะพััะธะบะฐ ะฟะพะดะฒะตัะบะธ', 'description' => 'ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั ะฐะผะพััะธะทะฐัะพัะพะฒ, ะฟััะถะธะฝ, ััะพะตะบ ะธ ะดััะณะธั ัะปะตะผะตะฝัะพะฒ ะฟะพะดะฒะตัะบะธ', 'price' => 1800, 'duration' => 45],
            ['name' => 'ะะธะฐะณะฝะพััะธะบะฐ ัะพัะผะพะทะฝะพะน ัะธััะตะผั', 'description' => 'ะะพะผะฟะปะตะบัะฝะฐั ะฟัะพะฒะตัะบะฐ ัะพัะผะพะทะฝัั ะบะพะปะพะดะพะบ, ะดะธัะบะพะฒ, ััะฟะฟะพััะพะฒ ะธ ัะพัะผะพะทะฝะพะน ะถะธะดะบะพััะธ', 'price' => 1500, 'duration' => 30],
            ['name' => 'ะะธะฐะณะฝะพััะธะบะฐ ะบะพะฝะดะธัะธะพะฝะตัะฐ', 'description' => 'ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ ัะธััะตะผั ะบะพะฝะดะธัะธะพะฝะธัะพะฒะฐะฝะธั, ะทะฐะฟัะฐะฒะบะฐ ััะตะพะฝะพะผ', 'price' => 2000, 'duration' => 40],
            ['name' => 'ะะธะฐะณะฝะพััะธะบะฐ ัะปะตะบััะธะบะธ', 'description' => 'ะัะพะฒะตัะบะฐ ัะปะตะบััะธัะตัะบะธั ัะธััะตะผ ะฐะฒัะพะผะพะฑะธะปั, ะฟะพะธัะบ ะฝะตะธัะฟัะฐะฒะฝะพััะตะน ะฒ ะฟัะพะฒะพะดะบะต', 'price' => 2200, 'duration' => 50]
        ],
        // ะะตะผะพะฝั ะดะฒะธะณะฐัะตะปั (category_id = 2)
        2 => [
            ['name' => 'ะะฐะฟะธัะฐะปัะฝัะน ัะตะผะพะฝั ะดะฒะธะณะฐัะตะปั', 'description' => 'ะะพะปะฝะฐั ัะฐะทะฑะพัะบะฐ ะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต ะดะฒะธะณะฐัะตะปั ั ะทะฐะผะตะฝะพะน ะธะทะฝะพัะตะฝะฝัั ะดะตัะฐะปะตะน', 'price' => 85000, 'duration' => 1440],
            ['name' => 'ะะฐะผะตะฝะฐ ะฟะพััะฝะตะฒัั ะบะพะปะตั', 'description' => 'ะะฐะผะตะฝะฐ ะฟะพััะฝะตะฒัั ะบะพะปะตั ะดะปั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะบะพะผะฟัะตััะธะธ ะดะฒะธะณะฐัะตะปั', 'price' => 25000, 'duration' => 480],
            ['name' => 'ะะตะผะพะฝั ะณะพะปะพะฒะบะธ ะฑะปะพะบะฐ ัะธะปะธะฝะดัะพะฒ', 'description' => 'ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะะะฆ, ะทะฐะผะตะฝะฐ ะบะปะฐะฟะฐะฝะพะฒ, ะฝะฐะฟัะฐะฒะปัััะธั ะฒััะปะพะบ', 'price' => 35000, 'duration' => 600],
            ['name' => 'ะะฐะผะตะฝะฐ ัะตะฟะธ ะะะ', 'description' => 'ะะฐะผะตะฝะฐ ัะตะฟะธ ะณะฐะทะพัะฐัะฟัะตะดะตะปะธัะตะปัะฝะพะณะพ ะผะตัะฐะฝะธะทะผะฐ ะธ ะฝะฐััะถะธัะตะปะตะน', 'price' => 15000, 'duration' => 300],
            ['name' => 'ะะตะผะพะฝั ัััะฑะธะฝั', 'description' => 'ะะพัััะฐะฝะพะฒะปะตะฝะธะต ัััะฑะพะบะพะผะฟัะตััะพัะฐ, ะทะฐะผะตะฝะฐ ะบะฐัััะธะดะถะฐ', 'price' => 45000, 'duration' => 360]
        ],
        // ะขะตัะฝะธัะตัะบะพะต ะพะฑัะปัะถะธะฒะฐะฝะธะต (category_id = 3)
        3 => [
            ['name' => 'ะขะ-1 (15000 ะบะผ)', 'description' => 'ะะตัะฒะพะต ัะตัะฝะธัะตัะบะพะต ะพะฑัะปัะถะธะฒะฐะฝะธะต: ะทะฐะผะตะฝะฐ ะผะฐัะปะฐ, ัะธะปัััะพะฒ, ะฟัะพะฒะตัะบะฐ ะพัะฝะพะฒะฝัั ัะธััะตะผ', 'price' => 8500, 'duration' => 120],
            ['name' => 'ะขะ-2 (30000 ะบะผ)', 'description' => 'ะัะพัะพะต ะขะ: ัะฐััะธัะตะฝะฝะฐั ะฟัะพะฒะตัะบะฐ, ะทะฐะผะตะฝะฐ ัะฒะตัะตะน, ะฒะพะทะดััะฝะพะณะพ ัะธะปัััะฐ', 'price' => 12000, 'duration' => 180],
            ['name' => 'ะขะ-3 (45000 ะบะผ)', 'description' => 'ะขัะตััะต ะขะ: ะทะฐะผะตะฝะฐ ัะพัะผะพะทะฝะพะน ะถะธะดะบะพััะธ, ะฐะฝัะธััะธะทะฐ, ะบะพะผะฟะปะตะบัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ', 'price' => 15500, 'duration' => 240],
            ['name' => 'ะัะตะดะฟัะพะดะฐะถะฝะฐั ะฟะพะดะณะพัะพะฒะบะฐ', 'description' => 'ะะพะผะฟะปะตะบัะฝะฐั ะฟะพะดะณะพัะพะฒะบะฐ ะฐะฒัะพะผะพะฑะธะปั ะบ ะฟัะพะดะฐะถะต', 'price' => 18000, 'duration' => 300],
            ['name' => 'ะกะตะทะพะฝะฝะพะต ะขะ', 'description' => 'ะะพะดะณะพัะพะฒะบะฐ ะฐะฒัะพะผะพะฑะธะปั ะบ ะทะธะผะฝะตะผั ะธะปะธ ะปะตัะฝะตะผั ัะตะทะพะฝั', 'price' => 6500, 'duration' => 90]
        ],
        // ะัะทะพะฒะฝะพะน ัะตะผะพะฝั (category_id = 4)
        4 => [
            ['name' => 'ะะพะบัะฐัะบะฐ ะฐะฒัะพะผะพะฑะธะปั ะฟะพะปะฝะฐั', 'description' => 'ะะพะปะฝะฐั ะฟะพะบัะฐัะบะฐ ะบัะทะพะฒะฐ ะฐะฒัะพะผะพะฑะธะปั ะฒ ะบะฐะผะตัะต ั ะณะฐัะฐะฝัะธะตะน', 'price' => 120000, 'duration' => 2880],
            ['name' => 'ะะพะบัะฐัะบะฐ ัะปะตะผะตะฝัะฐ ะบัะทะพะฒะฐ', 'description' => 'ะะพะบัะฐัะบะฐ ะพัะดะตะปัะฝะพะณะพ ัะปะตะผะตะฝัะฐ (ะดะฒะตัั, ะบััะปะพ, ะบะฐะฟะพั)', 'price' => 15000, 'duration' => 480],
            ['name' => 'ะะธััะพะฒะบะฐ ะฟะพัะปะต ะะขะ', 'description' => 'ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะณะตะพะผะตััะธะธ ะบัะทะพะฒะฐ ะฟะพัะปะต ะฐะฒะฐัะธะธ', 'price' => 45000, 'duration' => 720],
            ['name' => 'ะะฐะผะตะฝะฐ ะปะพะฑะพะฒะพะณะพ ััะตะบะปะฐ', 'description' => 'ะะฐะผะตะฝะฐ ะปะพะฑะพะฒะพะณะพ ััะตะบะปะฐ ั ะบะฐะปะธะฑัะพะฒะบะพะน ัะธััะตะผ ะฑะตะทะพะฟะฐัะฝะพััะธ', 'price' => 25000, 'duration' => 180],
            ['name' => 'ะะฝัะธะบะพััะพะทะธะนะฝะฐั ะพะฑัะฐะฑะพัะบะฐ', 'description' => 'ะะฐัะธัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะบัะทะพะฒะฐ ะพั ะบะพััะพะทะธะธ', 'price' => 8500, 'duration' => 240]
        ],
        // ะจะธะฝะพะผะพะฝัะฐะถ (category_id = 5)
        5 => [
            ['name' => 'ะจะธะฝะพะผะพะฝัะฐะถ ั ะฑะฐะปะฐะฝัะธัะพะฒะบะพะน (4 ะบะพะปะตัะฐ)', 'description' => 'ะะพะฝัะฐะถ ัะธะฝ ะฝะฐ ะดะธัะบะธ ั ะบะพะผะฟัััะตัะฝะพะน ะฑะฐะปะฐะฝัะธัะพะฒะบะพะน', 'price' => 2400, 'duration' => 60],
            ['name' => 'ะะตะผะพะฝั ะฟัะพะบะพะปะพะฒ', 'description' => 'ะะตะผะพะฝั ะฟัะพะบะพะปะพะฒ ัะธะฝ ะผะตัะพะดะพะผ ัะพะปะพะดะฝะพะน ะฒัะปะบะฐะฝะธะทะฐัะธะธ', 'price' => 800, 'duration' => 30],
            ['name' => 'ะัะฐะฒะบะฐ ะปะธััั ะดะธัะบะพะฒ', 'description' => 'ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะณะตะพะผะตััะธะธ ะปะธััั ะดะธัะบะพะฒ ะฟะพัะปะต ะฟะพะฒัะตะถะดะตะฝะธะน', 'price' => 3500, 'duration' => 120],
            ['name' => 'ะฃััะฐะฝะพะฒะบะฐ ะดะฐััะธะบะพะฒ ะดะฐะฒะปะตะฝะธั TPMS', 'description' => 'ะฃััะฐะฝะพะฒะบะฐ ะธ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธะต ะดะฐััะธะบะพะฒ ะดะฐะฒะปะตะฝะธั ะฒ ัะธะฝะฐั', 'price' => 4500, 'duration' => 90],
            ['name' => 'ะฅัะฐะฝะตะฝะธะต ัะธะฝ (ัะตะทะพะฝ)', 'description' => 'ะกะตะทะพะฝะฝะพะต ััะฐะฝะตะฝะธะต ะบะพะผะฟะปะตะบัะฐ ัะธะฝ ะฒ ัะฟะตัะธะฐะปัะฝัั ััะปะพะฒะธัั', 'price' => 3000, 'duration' => 30]
        ]
    ];
    
    $total_added = 0;
    
    foreach ($additional_services as $category_id => $services) {
        $category_name = '';
        foreach ($categories as $cat) {
            if ($cat['category_id'] == $category_id) {
                $category_name = $cat['category_name'];
                break;
            }
        }
        
        echo "๐ง ะะพะฑะฐะฒะปัะตะผ ััะปัะณะธ ะดะปั ะบะฐัะตะณะพัะธะธ: {$category_name}\n";
        
        foreach ($services as $service) {
            $stmt = $pdo->prepare("INSERT IGNORE INTO Services (service_name, description, base_price, duration_minutes, category_id) VALUES (?, ?, ?, ?, ?)");
            $result = $stmt->execute([
                $service['name'],
                $service['description'],
                $service['price'],
                $service['duration'],
                $category_id
            ]);
            
            if ($result && $stmt->rowCount() > 0) {
                echo "  โ {$service['name']} - {$service['price']} ััะฑ.\n";
                $total_added++;
            } else {
                echo "  - {$service['name']} (ัะถะต ัััะตััะฒัะตั)\n";
            }
        }
        echo "\n";
    }
    
    // ะกัะฐัะธััะธะบะฐ
    echo "๐ ะกัะฐัะธััะธะบะฐ ััะปัะณ:\n";
    $stmt = $pdo->query("SELECT COUNT(*) as total FROM Services");
    $total_services = $stmt->fetchColumn();
    echo "  ๐ ะัะตะณะพ ััะปัะณ ะฒ ะฑะฐะทะต: {$total_services}\n";
    echo "  โ ะะพะฑะฐะฒะปะตะฝะพ ะฝะพะฒัั ััะปัะณ: {$total_added}\n\n";
    
    // ะะพะบะฐะทัะฒะฐะตะผ ััะปัะณะธ ะฟะพ ะบะฐัะตะณะพัะธัะผ
    echo "๐ ะฃัะปัะณะธ ะฟะพ ะบะฐัะตะณะพัะธัะผ:\n";
    foreach ($categories as $category) {
        $stmt = $pdo->prepare("SELECT COUNT(*) FROM Services WHERE category_id = ?");
        $stmt->execute([$category['category_id']]);
        $count = $stmt->fetchColumn();
        echo "  - {$category['category_name']}: {$count} ััะปัะณ\n";
    }
    
    echo "\nโ ะขะฐะฑะปะธัะฐ Services ััะฟะตัะฝะพ ะทะฐะฟะพะปะฝะตะฝะฐ ะดะพะฟะพะปะฝะธัะตะปัะฝัะผะธ ััะปัะณะฐะผะธ!\n";
    
} catch (Exception $e) {
    echo "โ ะัะธะฑะบะฐ: " . $e->getMessage() . "\n";
    echo "ะคะฐะนะป: " . $e->getFile() . "\n";
    echo "ะกััะพะบะฐ: " . $e->getLine() . "\n";
}
?>